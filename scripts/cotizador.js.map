{"version":3,"sources":["cotizador.js"],"names":["mount","plazos","mountInput","document","getElementById","monthlyPayment","btnSubmitPreautorizado","terminosCondiciones","$","getJSON","format","done","data","prestamoPreautorizado","monto","console","log","value","parseFloat","toString","replace","toFixed","formatCurrency","checkMount","mountChanged","classList","remove","add","calculateMonthlyPayment","plazo","pago","Number","removeAttribute","checkFormStatus","checked","DropDown","el","dd","placeholder","children","opts","find","val","index","initEvents","prototype","obj","on","event","toggleClass","opt","text","getValue","getIndex","click","removeClass","addEventListener"],"mappings":"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","file":"cotizador.js","sourcesContent":["/* COTIZADOR */\nlet mount;\nlet plazos;\nconst mountInput = document.getElementById('mountInput');\n//const selectPlazo = document.getElementById('selectPlazo');\nconst monthlyPayment = document.getElementById('monthlyPayment');\nconst btnSubmitPreautorizado = document.getElementById('btnSubmitPreautorizado');\nconst terminosCondiciones = document.getElementById('terminosCondiciones');\n\n(function() {\n  $.getJSON( './preautorizado.json', {\n    format: 'json'\n  })\n    .done(data => {\n        mount = data.prestamoPreautorizado.monto;\n        console.log(mount);\n        plazos = data.prestamoPreautorizado.plazos;\n        mountInput.value = parseFloat(mount.toString().replace(/,/g, ''))\n                        .toFixed(2)\n                        .toString()\n                        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n      });\n})();\n\n// fetch('./preautorizado.json').then(r => r.json())\n//   .then(data => {\n//       mount = data.prestamoPreautorizado.monto;\n//       plazos = data.prestamoPreautorizado.plazos;\n//       mountInput.value = parseFloat(mount.toString().replace(/,/g, ''))\n//                       .toFixed(2)\n//                       .toString()\n//                       .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n//     })\n//   .catch(e => console.log(e));\n\n\n\nfunction formatCurrency (){\n    //number-format the user input\n    this.value = parseFloat(this.value.replace(/,/g, ''))\n                    .toFixed(2)\n                    .toString()\n                    .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\nfunction checkMount () {\n  let mountChanged = parseFloat(this.value.replace(/,/g, ''));\n  if(mountChanged  > mount){\n    this.classList.remove('valid');\n    this.classList.add('invalid');\n  }else{\n    this.classList.remove('invalid');\n    this.classList.add('valid');\n  }\n}\n\nfunction calculateMonthlyPayment (plazo) {\n  var pago = mount / Number(plazo);\n  monthlyPayment.value = pago.toFixed(2)\n                            .toString()\n                            .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  terminosCondiciones.removeAttribute('disabled');\n\n}\n\nfunction checkFormStatus () {\n  if(this.checked) {\n    if(monthlyPayment.value!='')  {\n      btnSubmitPreautorizado.classList.remove('disabled');\n      btnSubmitPreautorizado.classList.add('active');\n    }\n  }\n}\n\nfunction DropDown(el) {\n\t\t\t\tthis.dd = el;\n\t\t\t\tthis.placeholder = this.dd.children('span');\n\t\t\t\tthis.opts = this.dd.find('ul.dropdown > li');\n\t\t\t\tthis.val = '';\n\t\t\t\tthis.index = -1;\n\t\t\t\tthis.initEvents();\n\t\t\t}\n\t\t\tDropDown.prototype = {\n\t\t\t\tinitEvents : function() {\n\t\t\t\t\tvar obj = this;\n\n\t\t\t\t\tobj.dd.on('click', function(event){\n\t\t\t\t\t\t$(this).toggleClass('active');\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\n\t\t\t\t\tobj.opts.on('click',function(){\n\t\t\t\t\t\tvar opt = $(this);\n\t\t\t\t\t\tobj.val = opt.text();\n\t\t\t\t\t\tobj.index = opt.index();\n            var plazo = obj.val.replace( /\\D+/g, '');\n            calculateMonthlyPayment(plazo);\n\t\t\t\t\t\tobj.placeholder.text('' + obj.val);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetValue : function() {\n\t\t\t\t\treturn this.val;\n\t\t\t\t},\n\t\t\t\tgetIndex : function() {\n\t\t\t\t\treturn this.index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$(function() {\n\n\t\t\t\tvar dd = new DropDown( $('#dd') );\n\n\t\t\t\t$(document).click(function() {\n\t\t\t\t\t// all dropdowns\n\t\t\t\t\t$('.wrapper-dropdown-1').removeClass('active');\n\t\t\t\t});\n\n\t\t\t});\n\nmountInput.addEventListener('change', formatCurrency);\nmountInput.addEventListener('change', checkMount);\nmonthlyPayment.addEventListener('change', formatCurrency);\n//selectPlazo.addEventListener('change', calculateMonthlyPayment);\nterminosCondiciones.addEventListener('change', checkFormStatus)\n"]}